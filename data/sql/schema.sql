CREATE TABLE llista (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL, mail VARCHAR(255) NOT NULL, conegut text, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_translation (id BIGINT, titre VARCHAR(255) NOT NULL, text text, lang CHAR(2), slug VARCHAR(255), UNIQUE INDEX page_translation_sluggable_idx (slug, lang, titre), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page (id BIGINT AUTO_INCREMENT, parent_id BIGINT, visible TINYINT(1) DEFAULT '1' NOT NULL, submenu_list_class VARCHAR(50), image VARCHAR(100), nivells_sub BIGINT DEFAULT 2, position BIGINT, UNIQUE INDEX page_position_sortable_idx (position, parent_id), INDEX parent_id_idx (parent_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_translation (id BIGINT, text text, lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content (id BIGINT AUTO_INCREMENT, page_id BIGINT NOT NULL, type ENUM('text', 'images', 'videos', 'audios', 'docs', 'links', 'form') DEFAULT 'text' NOT NULL, users ENUM('tots', 'llista') DEFAULT 'tots' NOT NULL, visible TINYINT(1) DEFAULT '1' NOT NULL, position BIGINT, UNIQUE INDEX page_content_position_sortable_idx (position, page_id), INDEX page_id_idx (page_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_audio_translation (id BIGINT, titre VARCHAR(255), lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_audio (id BIGINT AUTO_INCREMENT, content_id BIGINT NOT NULL, url VARCHAR(255) NOT NULL, position BIGINT, UNIQUE INDEX page_content_audio_position_sortable_idx (position, content_id), INDEX content_id_idx (content_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_doc_translation (id BIGINT, titre VARCHAR(255), lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_doc (id BIGINT AUTO_INCREMENT, content_id BIGINT NOT NULL, url VARCHAR(255) NOT NULL, position BIGINT, UNIQUE INDEX page_content_doc_position_sortable_idx (position, content_id), INDEX content_id_idx (content_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_image_translation (id BIGINT, titre VARCHAR(255), lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_image (id BIGINT AUTO_INCREMENT, content_id BIGINT NOT NULL, image_small VARCHAR(255) NOT NULL, image VARCHAR(255) NOT NULL, position BIGINT, UNIQUE INDEX page_content_image_position_sortable_idx (position, content_id), INDEX content_id_idx (content_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_link_translation (id BIGINT, titre VARCHAR(255), lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_link (id BIGINT AUTO_INCREMENT, content_id BIGINT NOT NULL, url VARCHAR(255) NOT NULL, position BIGINT, UNIQUE INDEX page_content_link_position_sortable_idx (position, content_id), INDEX content_id_idx (content_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_video_translation (id BIGINT, titre VARCHAR(255), lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE page_content_video (id BIGINT AUTO_INCREMENT, content_id BIGINT NOT NULL, image_small VARCHAR(255) NOT NULL, url VARCHAR(255) NOT NULL, position BIGINT, UNIQUE INDEX page_content_video_position_sortable_idx (position, content_id), INDEX content_id_idx (content_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
ALTER TABLE page_translation ADD CONSTRAINT page_translation_id_page_id FOREIGN KEY (id) REFERENCES page(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE page ADD CONSTRAINT page_parent_id_page_id FOREIGN KEY (parent_id) REFERENCES page(id) ON DELETE CASCADE;
ALTER TABLE page_content_translation ADD CONSTRAINT page_content_translation_id_page_content_id FOREIGN KEY (id) REFERENCES page_content(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE page_content ADD CONSTRAINT page_content_page_id_page_id FOREIGN KEY (page_id) REFERENCES page(id) ON DELETE CASCADE;
ALTER TABLE page_content_audio_translation ADD CONSTRAINT page_content_audio_translation_id_page_content_audio_id FOREIGN KEY (id) REFERENCES page_content_audio(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE page_content_audio ADD CONSTRAINT page_content_audio_content_id_page_content_id FOREIGN KEY (content_id) REFERENCES page_content(id) ON DELETE CASCADE;
ALTER TABLE page_content_doc_translation ADD CONSTRAINT page_content_doc_translation_id_page_content_doc_id FOREIGN KEY (id) REFERENCES page_content_doc(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE page_content_doc ADD CONSTRAINT page_content_doc_content_id_page_content_id FOREIGN KEY (content_id) REFERENCES page_content(id) ON DELETE CASCADE;
ALTER TABLE page_content_image_translation ADD CONSTRAINT page_content_image_translation_id_page_content_image_id FOREIGN KEY (id) REFERENCES page_content_image(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE page_content_image ADD CONSTRAINT page_content_image_content_id_page_content_id FOREIGN KEY (content_id) REFERENCES page_content(id) ON DELETE CASCADE;
ALTER TABLE page_content_link_translation ADD CONSTRAINT page_content_link_translation_id_page_content_link_id FOREIGN KEY (id) REFERENCES page_content_link(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE page_content_link ADD CONSTRAINT page_content_link_content_id_page_content_id FOREIGN KEY (content_id) REFERENCES page_content(id) ON DELETE CASCADE;
ALTER TABLE page_content_video_translation ADD CONSTRAINT page_content_video_translation_id_page_content_video_id FOREIGN KEY (id) REFERENCES page_content_video(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE page_content_video ADD CONSTRAINT page_content_video_content_id_page_content_id FOREIGN KEY (content_id) REFERENCES page_content(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
